<HEAD> <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css"> </HEAD> <body> <img src="logo_color_tiny.png" valign="bottom" align="right"> <B><font face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">DHD-API 3.2.2 documentation</font></B><BR>&nbsp<BR>   
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>hello_world.cpp</h1><p>The "hello world" DHD-3.2 application.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &quot;<a class="code" href="dhdc_8h.html" title="DHD header file.">dhdc.h</a>&quot;</span>



<span class="preprocessor">#define K   1000.0</span>
<span class="preprocessor"></span>


<span class="comment">// simple spring model which pulls the device</span>
<span class="comment">// towards the center of the workspace;</span>
<span class="comment">// if the user lifts the device 5cm above the center,</span>
<span class="comment">// the application exits</span>
<span class="keywordtype">int</span>
compute_my_forces (<span class="keywordtype">double</span> px,  <span class="keywordtype">double</span> py,  <span class="keywordtype">double</span> pz,
                   <span class="keywordtype">double</span> *fx, <span class="keywordtype">double</span> *fy, <span class="keywordtype">double</span> *fz)
{
  <span class="comment">// spring model</span>
  *fx = -K * px;
  *fy = -K * py;
  *fz = -K * pz;

  <span class="comment">// exit condition</span>
  <span class="keywordflow">if</span> (pz &gt; 0.05) <span class="keywordflow">return</span> 1;
  <span class="keywordflow">else</span>           <span class="keywordflow">return</span> 0;
}



<span class="keywordtype">int</span>
main (<span class="keywordtype">int</span>  argc,
      <span class="keywordtype">char</span> **argv)
{
  <span class="keywordtype">int</span>    done = 0;
  <span class="keywordtype">double</span> px, py, pz;
  <span class="keywordtype">double</span> fx, fy, fz;


  <span class="keywordflow">if</span> (<a name="a0"></a>dhdOpen () &lt; 0) {
    printf (<span class="stringliteral">&quot;error: cannot open device\n&quot;</span>);
  }

  printf (<span class="stringliteral">&quot;spring model applied...\n&quot;</span>);

  <span class="keywordflow">while</span> (!done) {

    <span class="comment">// get end-effector position</span>
    <a name="a1"></a>dhdGetPosition (&amp;px, &amp;py, &amp;pz);

    <span class="comment">// compute force model</span>
    done = compute_my_forces (px, py, pz, &amp;fx, &amp;fy, &amp;fz);

    <span class="comment">// apply forces</span>
    <a name="a2"></a>dhdSetForce (fx, fy, fz);

    <span class="comment">// exit if the button is pushed</span>
    done += <a name="a3"></a>dhdGetButton (0);
  }

  printf (<span class="stringliteral">&quot;exiting application\n&quot;</span>);

  <a name="a4"></a>dhdClose ();


  <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<font size=-2><br><hr><b>DHD-API 3.2.2 documentation</b><br>Please address any questions to <a href="mailto:support@forcedimension.com">support@forcedimension.com</a><br>(C) 2001-2010 - <a href="http://www.forcedimension.com">Force Dimension</a><br>All Rights Reserved.
