<HEAD> <LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css"> </HEAD> <body> <img src="logo_color_tiny.png" valign="bottom" align="right"> <B><font face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular">DHD-API 3.2.2 documentation</font></B><BR>&nbsp<BR>   
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>multiple_devices.cpp</h1><p>Simple example of multiple-devices programming.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<span class="preprocessor">#include &quot;<a class="code" href="dhdc_8h.html" title="DHD header file.">dhdc.h</a>&quot;</span>



<span class="keywordtype">int</span>
main (<span class="keywordtype">int</span>  argc,
      <span class="keywordtype">char</span> **argv)
{
  <span class="keywordtype">int</span> done = 0;
  <span class="keywordtype">int</span> deviceCount;
  <span class="keywordtype">int</span> deviceID0;
  <span class="keywordtype">int</span> deviceID1;



  <span class="comment">// get device count</span>
  deviceCount = <a name="a0"></a>dhdGetDeviceCount ();
  <span class="keywordflow">if</span> (deviceCount &lt; 0) {
    printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, <a name="a1"></a>dhdErrorGetLastStr ());
    <span class="keywordflow">return</span> 0;
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (deviceCount &lt; 1) {
    printf (<span class="stringliteral">&quot;error: no device detected\n&quot;</span>);
  }
  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (deviceCount &lt; 2) {
    printf (<span class="stringliteral">&quot;error: single device detected\n&quot;</span>);
  }

  <span class="comment">// open the first available device</span>
  <span class="keywordflow">if</span> ((deviceID0 = <a name="a2"></a>dhdOpenID (0)) &lt; 0) {
    printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
  }

  <span class="comment">// open the second available device</span>
  <span class="keywordflow">if</span> ((deviceID1 = dhdOpenID (1)) &lt; 0) {
    printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
  }


  <span class="comment">// haptic loop</span>
  <span class="keywordflow">while</span> (!done) {

    <span class="comment">// apply a null force to put the first device in gravity compensation</span>
    <span class="keywordflow">if</span> (<a name="a3"></a>dhdSetForce (0.0, 0.0, 0.0, deviceID0) &lt; 0) {
      printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
      done = 1;
    }

    <span class="comment">// apply a null force to put the second device in gravity compensation</span>
    <span class="keywordflow">if</span> (dhdSetForce (0.0, 0.0, 0.0, deviceID1) &lt; 0) {
      printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
      done = 1;
    }

    <span class="comment">// detect button click to quit the haptic loop</span>
    <span class="keywordflow">if</span> (<a name="a4"></a>dhdGetButton (0)) {
      printf (<span class="stringliteral">&quot;exiting...\n&quot;</span>);
    }
  }

  <span class="comment">// close the connection to the first device</span>
  <span class="keywordflow">if</span> (<a name="a5"></a>dhdClose (0) &lt; 0) {
    printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
  }

  <span class="comment">// close the connection to the second device</span>
  <span class="keywordflow">if</span> (dhdClose (1) &lt; 0) {
    printf (<span class="stringliteral">&quot;error: %s\n&quot;</span>, dhdErrorGetLastStr ());
  }


  <span class="keywordflow">return</span> 0;
}
</pre></div> </div>
<font size=-2><br><hr><b>DHD-API 3.2.2 documentation</b><br>Please address any questions to <a href="mailto:support@forcedimension.com">support@forcedimension.com</a><br>(C) 2001-2010 - <a href="http://www.forcedimension.com">Force Dimension</a><br>All Rights Reserved.
